## 📊 SH_CC 데이터 이관 방식 비교 결과

### 🔍 총 데이터
- **SH_CC 시트**: 1,235건
- **SH_CC 유니크 주문ID**: 619개

---

## 📈 방식별 비교

### 1️⃣ SH_M 방식 (주문ID → 이메일 → users.email)
- **매핑 경로**: SH_CC(B열 주문ID) → SH_M(주문ID→Email) → users(email)
- **이관 성공**: **407건** (33.0%)
- **건너뜀**: 828건 (67.0%)

**장점**:
- ✅ 가장 많은 데이터 이관 (407건)
- ✅ SH_M이 주문ID-이메일 매핑 중개 역할

**단점**:
- ❌ SH_M 시트 의존성 (시트 업데이트 필요)
- ❌ 2단계 매핑 (주문ID → 이메일 → 사용자)

---

### 2️⃣ SH_CC 직접 방식 (이메일 직접 매칭)
- **매핑 경로**: SH_CC(K열 Email) → users(email)
- **이관 성공**: **299건** (24.2%)
- **건너뜀**: 936건 (75.8%)

**장점**:
- ✅ 단순한 1단계 매핑
- ✅ SH_M 시트 불필요

**단점**:
- ❌ SH_CC K열 이메일 불완전 (73.4% 미매칭)
- ❌ 가장 적은 데이터 이관 (299건)

---

### 3️⃣ **users.order_id 직접 방식** ⭐ (현재 채택)
- **매핑 경로**: SH_CC(B열 주문ID) → users(order_id)
- **이관 성공**: **393건** (31.8%)
- **건너뜀**: 842건 (68.2%)

**장점**:
- ✅ 단순한 1단계 매핑
- ✅ SH_M 시트 불필요
- ✅ DB 기본 키 직접 매칭 (가장 안정적)
- ✅ 두 번째로 많은 데이터 (393건)

**단점**:
- ⚠️ users.order_id에 없는 주문ID는 매칭 불가 (842건)

---

## 💡 최종 결론 및 권장사항

### 📊 데이터 이관 현황
| 방식 | 성공 건수 | 비율 | 순위 |
|------|----------|------|------|
| **SH_M 방식** | **407건** | 33.0% | 🥇 1위 |
| **users.order_id 직접** | **393건** | 31.8% | 🥈 2위 |
| SH_CC 이메일 직접 | 299건 | 24.2% | 🥉 3위 |

### 🎯 권장 방식

#### 방법 A: **하이브리드 방식** (권장) 🌟
1. **1차**: users.order_id로 직접 매칭 (393건)
2. **2차**: 매칭 실패한 주문ID는 SH_M 통해 이메일 매핑 (추가 14건 예상)
3. **예상 총 합**: ~407건

**장점**:
- 최대 데이터 확보 가능
- DB 직접 매칭 우선 (안정성)
- 백업으로 SH_M 활용

---

#### 방법 B: **users.order_id만 사용** (현재) ✅
- **이관**: 393건 (31.8%)
- **장점**: 단순, 안정적, SH_M 불필요
- **적합**: DB 중심 운영, 유지보수 우선

---

#### 방법 C: **SH_M 방식만 사용** (이전)
- **이관**: 407건 (33.0%)
- **장점**: 가장 많은 데이터
- **단점**: SH_M 시트 의존성
- **적합**: 구글시트 중심 운영

---

## 🔍 미매칭 데이터 분석

### 842건 건너뜀 원인
1. **users.order_id에 없는 주문ID**: 619개 중 226개 (36.5%)
   - 이들은 SH_M에만 존재하거나 아예 없는 주문
2. **SH_CC에 이메일 없음**: 98건
3. **중복 주문ID 레코드**: 여러 건 중 일부만 매칭

### 📝 개선 방안
1. **users.order_id 보완**: 누락된 226개 주문ID 추가
2. **SH_M 백업**: 매칭 실패시 SH_M 경로 사용
3. **데이터 정제**: SH_CC K열 이메일 보완

---

## ✅ 최종 결정

**현재 users.order_id 직접 방식 유지**:
- 393건 (31.8%) 이관 완료
- 단순하고 안정적인 구조
- DB 중심 운영에 최적화

필요시 **하이브리드 방식**으로 전환하여 407건까지 확장 가능
